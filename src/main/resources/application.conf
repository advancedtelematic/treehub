akka {
  loggers = ["akka.event.slf4j.Slf4jLogger"]

  http.server = {
    parsing.max-content-length = 3GB
    request-timeout = 30 minutes
    idle-timeout = 30 minutes
  }

  actor.deployment {
    "/usage-router/*" {
      dispatcher = blocking-io-dispatcher
    }
  }
}

blocking-io-dispatcher {
  type = Dispatcher
  executor = "thread-pool-executor"
  thread-pool-executor {
    fixed-pool-size = 32
  }
  throughput = 1
}

database = {
  driver = "org.mariadb.jdbc.Driver"
  url = "jdbc:mariadb://localhost:3306/ota_treehub"
  url = ${?DB_URL}
  properties {
    user = "treehub"
    user = ${?DB_USER}
    password = "treehub"
    password = ${?DB_PASSWORD}
  }
  numThreads = 20
  numThreads = ${?DB_NUM_THREADS}
  queueSize = 1000
  queueSize = ${?DB_QUEUE_SIZE}
  migrate = false
  migrate = ${?DB_MIGRATE}
  registerMbeans = true
}

server = {
  host = "0.0.0.0"
  host = ${?BIND_HOST}
  port = 8084
  port = ${?BIND_PORT}
  treeHubHost = "http://localhost"
  treeHubHost = ${?TREEHUB_HOSTNAME}
}

treehub {
  localStorePath = "/tmp/treehub"
  localStorePath = ${?TREEHUB_LOCAL_STORE_PATH}
}

core = {
  baseUri = "http://localhost:8080"
  baseUri = ${?CORE_API_URI}
  packagesApi = "/api/v1/packages"
}

device_registry = {
  baseUri = "http://localhost:8083"
  baseUri = ${?DEVICE_REGISTRY_API_URI}
  devicesUri = "/api/v1/devices"
  deviceGroupsUri = "/api/v1/device_groups"
  mydeviceUri = "/api/v1/mydevice"
}

auth {
  protocol = "oauth.accesstoken" # or none
  protocol = ${?AUTH_PROTOCOL}
  verification = "local" # three options: none, local, auth-plus
  verification = ${?AUTH_VERIFICATION}
  token {
    secret = "AyM1SysPpbyDfgZld3umj1qzKObwVMkoqQ-EstJQLr_T-1qS0gZH75aKtMN3Yj0iPS4hcgUuTwjAzZr1Z9CAow"
    secret = ${?JWT_SECRET}
  }
}

authplus {
  api.uri = "http://localhost:9001"
  api.uri = ${?AUTHPLUS_HOST}
  client{
    id = ""
    id = ${?AUTHPLUS_CLIENT_ID}
    secret = ""
    secret = ${?AUTHPLUS_CLIENT_SECRET}
  }
}

messaging {
  kafka {
    groupIdPrefix = "treehub"
    groupIdPrefix = ${?KAFKA_GROUP_ID}
    topicSuffix = "dev"
    topicSuffix = ${?KAFKA_TOPIC_SUFFIX}
    host = "localhost:9092"
    host = ${?KAFKA_HOST}
  }
}
